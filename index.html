<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Anglais Master - 100 Verbes</title>
    <style>
        :root { --primary: #6366f1; --bg: #f8fafc; --text: #1e293b; --danger: #ef4444; --success: #22c55e; }
        body { font-family: 'Segoe UI', sans-serif; background: var(--bg); color: var(--text); margin: 0; padding: 10px; display: flex; justify-content: center; }
        .app-container { width: 100%; max-width: 600px; background: white; border-radius: 20px; box-shadow: 0 10px 30px rgba(0,0,0,0.1); overflow: hidden; }
        .tabs { display: flex; background: #f1f5f9; border-bottom: 1px solid #e2e8f0; }
        .tab { flex: 1; padding: 15px; border: none; background: none; cursor: pointer; font-weight: bold; color: #64748b; }
        .tab.active { color: var(--primary); border-bottom: 3px solid var(--primary); background: white; }
        .content { padding: 15px; display: none; }
        .content.active { display: block; }
        .stats { display: flex; justify-content: center; gap: 30px; margin-bottom: 15px; font-weight: 800; padding-bottom: 10px; }
        .stat-item { display: flex; flex-direction: column; align-items: center; }
        #score { color: var(--success); font-size: 1.4rem; }
        #best { color: var(--danger); font-size: 1.4rem; }
        .verb-card { background: #f1f5f9; padding: 25px; border-radius: 15px; margin-bottom: 15px; text-align: center; }
        input[type="text"] { width: 100%; padding: 12px; margin: 8px 0; border: 1px solid #cbd5e1; border-radius: 10px; box-sizing: border-box; font-size: 1rem; }
        .btn-check { width: 100%; background: var(--primary); color: white; border: none; padding: 15px; border-radius: 10px; font-weight: bold; cursor: pointer; font-size: 1.1rem; }
        .list-container { max-height: 450px; overflow-y: auto; border-radius: 10px; }
        .verb-item { display: grid; grid-template-columns: 1fr 2.5fr 40px; padding: 12px; border-bottom: 1px solid #f1f5f9; align-items: center; font-size: 0.85rem; }
        .mastery-dot { font-size: 0.7rem; color: #94a3b8; }
        #feedback { text-align: center; margin-top: 10px; font-weight: bold; min-height: 45px; }
    </style>
</head>
<body>

<div class="app-container">
    <div class="tabs">
        <button class="tab active" onclick="openTab('quiz', this)">QUIZ</button>
        <button class="tab" onclick="openTab('revision', this)">LISTE DES 100</button>
    </div>

    <div id="quiz" class="content active">
        <div class="stats">
            <div class="stat-item"><span id="score">0</span></div>
            <div class="stat-item"><span id="best">0</span></div>
        </div>
        <div class="verb-card">
            <h2 id="q-fr">-</h2>
            <p>Base : <strong id="q-inf">-</strong></p>
        </div>
        <input type="text" id="input-pre" placeholder="PrÃ©tÃ©rit" autocomplete="off">
        <input type="text" id="input-par" placeholder="Participe PassÃ©" autocomplete="off">
        <button class="btn-check" onclick="checkAnswer()">VÃ©rifier</button>
        <div id="feedback"></div>
    </div>

    <div id="revision" class="content">
        <input type="text" id="search" placeholder="Rechercher un verbe..." onkeyup="renderRevision()">
        <div class="list-container" id="list-revision"></div>
    </div>
</div>

<script>
    const verbes = [
        { fr: "ÃŠtre", inf: "be", pre: "was", par: "been" }, { fr: "Porter", inf: "bear", pre: "bore", par: "borne" },
        { fr: "Battre", inf: "beat", pre: "beat", par: "beaten" }, { fr: "Devenir", inf: "become", pre: "became", par: "become" },
        { fr: "Commencer", inf: "begin", pre: "began", par: "begun" }, { fr: "Parier", inf: "bet", pre: "bet", par: "bet" },
        { fr: "Mordre", inf: "bite", pre: "bit", par: "bitten" }, { fr: "Saigner", inf: "bleed", pre: "bled", par: "bled" },
        { fr: "Souffler", inf: "blow", pre: "blew", par: "blown" }, { fr: "Casser", inf: "break", pre: "broke", par: "broken" },
        { fr: "Apporter", inf: "bring", pre: "brought", par: "brought" }, { fr: "Construire", inf: "build", pre: "built", par: "built" },
        { fr: "BrÃ»ler", inf: "burn", pre: "burnt", par: "burnt" }, { fr: "Acheter", inf: "buy", pre: "bought", par: "bought" },
        { fr: "Attraper", inf: "catch", pre: "caught", par: "caught" }, { fr: "Choisir", inf: "choose", pre: "chose", par: "chosen" },
        { fr: "Venir", inf: "come", pre: "came", par: "come" }, { fr: "CoÃ»ter", inf: "cost", pre: "cost", par: "cost" },
        { fr: "Couper", inf: "cut", pre: "cut", par: "cut" }, { fr: "Faire", inf: "do", pre: "did", par: "done" },
        { fr: "Dessiner", inf: "draw", pre: "drew", par: "drawn" }, { fr: "RÃªver", inf: "dream", pre: "dreamt", par: "dreamt" },
        { fr: "Boire", inf: "drink", pre: "drank", par: "drunk" }, { fr: "Conduire", inf: "drive", pre: "drove", par: "driven" },
        { fr: "Manger", inf: "eat", pre: "ate", par: "eaten" }, { fr: "Tomber", inf: "fall", pre: "fell", par: "fallen" },
        { fr: "Nourrir", inf: "feed", pre: "fed", par: "fed" }, { fr: "Ressentir", inf: "feel", pre: "felt", par: "felt" },
        { fr: "Se battre", inf: "fight", pre: "fought", par: "fought" }, { fr: "Trouver", inf: "find", pre: "found", par: "found" },
        { fr: "Voler", inf: "fly", pre: "flew", par: "flown" }, { fr: "Oublier", inf: "forget", pre: "forgot", par: "forgotten" },
        { fr: "Pardonner", inf: "forgive", pre: "forgave", par: "forgiven" }, { fr: "Geler", inf: "freeze", pre: "froze", par: "frozen" },
        { fr: "Obtenir", inf: "get", pre: "got", par: "got" }, { fr: "Donner", inf: "give", pre: "gave", par: "given" },
        { fr: "Aller", inf: "go", pre: "went", par: "gone" }, { fr: "Grandir", inf: "grow", pre: "grew", par: "grown" },
        { fr: "Accrocher", inf: "hang", pre: "hung", par: "hung" }, { fr: "Avoir", inf: "have", pre: "had", par: "had" },
        { fr: "Entendre", inf: "hear", pre: "heard", par: "heard" }, { fr: "Cacher", inf: "hide", pre: "hid", par: "hidden" },
        { fr: "Frapper", inf: "hit", pre: "hit", par: "hit" }, { fr: "Tenir", inf: "hold", pre: "held", par: "held" },
        { fr: "Blesser", inf: "hurt", pre: "hurt", par: "hurt" }, { fr: "Garder", inf: "keep", pre: "kept", par: "kept" },
        { fr: "Savoir", inf: "know", pre: "knew", par: "known" }, { fr: "Poser", inf: "lay", pre: "laid", par: "laid" },
        { fr: "Mener", inf: "lead", pre: "led", par: "led" }, { fr: "Apprendre", inf: "learn", pre: "learnt", par: "learnt" },
        { fr: "Quitter", inf: "leave", pre: "left", par: "left" }, { fr: "PrÃªter", inf: "lend", pre: "lent", par: "lent" },
        { fr: "Laisser", inf: "let", pre: "let", par: "let" }, { fr: "Perdre", inf: "lose", pre: "lost", par: "lost" },
        { fr: "Fabriquer", inf: "make", pre: "made", par: "made" }, { fr: "Signifier", inf: "mean", pre: "meant", par: "meant" },
        { fr: "Rencontrer", inf: "meet", pre: "met", par: "met" }, { fr: "Payer", inf: "pay", pre: "paid", par: "paid" },
        { fr: "Mettre", inf: "put", pre: "put", par: "put" }, { fr: "Lire", inf: "read", pre: "read", par: "read" },
        { fr: "Monter", inf: "ride", pre: "rode", par: "ridden" }, { fr: "Sonner", inf: "ring", pre: "rang", par: "rung" },
        { fr: "Courir", inf: "run", pre: "ran", par: "run" }, { fr: "Dire", inf: "say", pre: "said", par: "said" },
        { fr: "Voir", inf: "see", pre: "saw", par: "seen" }, { fr: "Vendre", inf: "sell", pre: "sold", par: "sold" },
        { fr: "Envoyer", inf: "send", pre: "sent", par: "sent" }, { fr: "RÃ©gler", inf: "set", pre: "set", par: "set" },
        { fr: "Secouer", inf: "shake", pre: "shook", par: "shaken" }, { fr: "Briller", inf: "shine", pre: "shone", par: "shone" },
        { fr: "Tirer", inf: "shoot", pre: "shot", par: "shot" }, { fr: "Montrer", inf: "show", pre: "showed", par: "shown" },
        { fr: "Fermer", inf: "shut", pre: "shut", par: "shut" }, { fr: "Chanter", inf: "sing", pre: "sang", par: "sung" },
        { fr: "S'asseoir", inf: "sit", pre: "sat", par: "sat" }, { fr: "Dormir", inf: "sleep", pre: "slept", par: "slept" },
        { fr: "Glisser", inf: "slide", pre: "slid", par: "slid" }, { fr: "Parler", inf: "speak", pre: "spoke", par: "spoken" },
        { fr: "DÃ©penser", inf: "spend", pre: "spent", par: "spent" }, { fr: "Se tenir", inf: "stand", pre: "stood", par: "stood" },
        { fr: "Voler", inf: "steal", pre: "stole", par: "stolen" }, { fr: "Coller", inf: "stick", pre: "stuck", par: "stuck" },
        { fr: "Nager", inf: "swim", pre: "swam", par: "swum" }, { fr: "Prendre", inf: "take", pre: "took", par: "taken" },
        { fr: "Enseigner", inf: "teach", pre: "taught", par: "taught" }, { fr: "DÃ©chirer", inf: "tear", pre: "tore", par: "torn" },
        { fr: "Raconter", inf: "tell", pre: "told", par: "told" }, { fr: "Penser", inf: "think", pre: "thought", par: "thought" },
        { fr: "Lancer", inf: "throw", pre: "threw", par: "thrown" }, { fr: "Comprendre", inf: "understand", pre: "understood", par: "understood" },
        { fr: "RÃ©veiller", inf: "wake", pre: "woke", par: "woken" }, { fr: "Porter", inf: "wear", pre: "wore", par: "worn" },
        { fr: "Gagner", inf: "win", pre: "won", par: "won" }, { fr: "Ã‰crire", inf: "write", pre: "wrote", par: "written" }
    ];

    let currentIdx = 0, score = 0;
    let mastery = JSON.parse(localStorage.getItem('masteryData')) || {}; 
    let best = localStorage.getItem('bestScore') || 0;

    document.getElementById('best').innerText = best;

    function speakDual(frText, enText) {
        window.speechSynthesis.cancel();
        const mFr = new SpeechSynthesisUtterance(frText);
        mFr.lang = 'fr-FR';
        mFr.onend = () => {
            const mEn = new SpeechSynthesisUtterance(enText);
            mEn.lang = 'en-US';
            window.speechSynthesis.speak(mEn);
        };
        window.speechSynthesis.speak(mFr);
    }

    function checkAnswer() {
        const p = document.getElementById('input-pre').value.toLowerCase().trim();
        const pp = document.getElementById('input-par').value.toLowerCase().trim();
        const v = verbes[currentIdx];
        const fb = document.getElementById('feedback');
        
        if (p === v.pre && pp === v.par) {
            score++;
            fb.innerHTML = "<span style='color:var(--success)'>âœ… Correct !</span>";
            mastery[v.inf] = Math.min((mastery[v.inf] || 0) + 1, 7);
            localStorage.setItem('masteryData', JSON.stringify(mastery));
            speakDual("Correct", `${v.inf}, ${v.pre}, ${v.par}`);
            setTimeout(nextQuestion, 1200);
        } else {
            score = 0;
            fb.innerHTML = `<span style='color:var(--danger)'>${v.pre} | ${v.par}</span>`;
            mastery[v.inf] = -1; 
            localStorage.setItem('masteryData', JSON.stringify(mastery));
        }
        updateScore();
    }

    function nextQuestion() {
        const scores = verbes.map(v => mastery[v.inf] || 0);
        const minScore = Math.min(...scores);
        let pool = verbes.filter(v => (mastery[v.inf] || 0) === minScore);
        if (minScore === 7) pool = verbes;

        const randomVerb = pool[Math.floor(Math.random() * pool.length)];
        currentIdx = verbes.indexOf(randomVerb);
        
        document.getElementById('q-fr').innerText = randomVerb.fr;
        document.getElementById('q-inf').innerText = randomVerb.inf;
        document.getElementById('input-pre').value = ""; 
        document.getElementById('input-par').value = "";
        document.getElementById('feedback').innerText = "";
    }

    function renderRevision() {
        const container = document.getElementById('list-revision');
        const search = document.getElementById('search').value.toLowerCase();
        let list = verbes.filter(v => v.fr.toLowerCase().includes(search) || v.inf.toLowerCase().includes(search));

        container.innerHTML = list.map(v => {
            const m = mastery[v.inf] || 0;
            return `
                <div class="verb-item">
                    <span>${v.fr}<br><small class="mastery-dot">${m}/7</small></span>
                    <div><b>${v.inf}</b> / ${v.pre} / ${v.par}</div>
                    <button style="border:none; background:none; cursor:pointer; font-size:1.2rem" onclick="speakDual('${v.fr}', '${v.inf} ${v.pre} ${v.par}')">ðŸ”Š</button>
                </div>
            `;
        }).join('');
    }

    function updateScore() {
        document.getElementById('score').innerText = score;
        if (score > best) { best = score; localStorage.setItem('bestScore', best); document.getElementById('best').innerText = best; }
    }

    function openTab(tabId, el) {
        document.querySelectorAll('.content').forEach(c => c.classList.remove('active'));
        document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
        document.getElementById(tabId).classList.add('active');
        el.classList.add('active');
        if(tabId === 'revision') renderRevision();
    }

    nextQuestion();
</script>
</body>
</html>
